<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Diagnostics</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();setSynopsis("mini_Diagnostics.html");};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">HMTC</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr></table><p class="caption">Diagnostics</p></div><div id="table-of-contents"><p class="caption">Contents</p><ul><li><a href="#g:1">Diagnostic messages
</a></li><li><a href="#g:2">Diagnostic computations
</a></li><li><a href="#g:3">Reporting and checking for internal errors
</a></li></ul></div><div id="description"><p class="caption">Description</p><div class="doc"><p>Diagnostic messages and computations (monad). The module provides
 a datatype for representing diagnostic messages, tagged with
 source-code position and severity level (error, warning, information).
 It also provides an abstraction for diagnostic computations, where
 a computation has the ability to emit diagnostic messages and, possibly,
 fail. Finally, it provides a utility function for reporting internal
 compiler errors in a standardized way.
</p></div></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><span class="keyword">data</span>  <a href="#t:DMsg">DMsg</a>  = <a href="#v:DMsg">DMsg</a> {<ul class="subs"><li><a href="#v:dmLvl">dmLvl</a> :: <a href="Diagnostics.html#t:DMLvl">DMLvl</a></li><li><a href="#v:dmSrcPos">dmSrcPos</a> :: <a href="SrcPos.html#t:SrcPos">SrcPos</a></li><li><a href="#v:dmTxt">dmTxt</a> :: String</li></ul>}</li><li class="src short"><span class="keyword">data</span>  <a href="#t:DMLvl">DMLvl</a> <ul class="subs"><li>= <a href="#v:DMLInfo">DMLInfo</a>  </li><li>| <a href="#v:DMLWng">DMLWng</a>  </li><li>| <a href="#v:DMLErr">DMLErr</a>  </li></ul></li><li class="src short"><a href="#v:mkInfoMsg">mkInfoMsg</a> :: <a href="SrcPos.html#t:SrcPos">SrcPos</a> -&gt; String -&gt; <a href="Diagnostics.html#t:DMsg">DMsg</a></li><li class="src short"><a href="#v:mkWngMsg">mkWngMsg</a> :: <a href="SrcPos.html#t:SrcPos">SrcPos</a> -&gt; String -&gt; <a href="Diagnostics.html#t:DMsg">DMsg</a></li><li class="src short"><a href="#v:mkErrMsg">mkErrMsg</a> :: <a href="SrcPos.html#t:SrcPos">SrcPos</a> -&gt; String -&gt; <a href="Diagnostics.html#t:DMsg">DMsg</a></li><li class="src short"><a href="#v:dmIsInfo">dmIsInfo</a> :: <a href="Diagnostics.html#t:DMsg">DMsg</a> -&gt; Bool</li><li class="src short"><a href="#v:dmIsWng">dmIsWng</a> :: <a href="Diagnostics.html#t:DMsg">DMsg</a> -&gt; Bool</li><li class="src short"><a href="#v:dmIsErr">dmIsErr</a> :: <a href="Diagnostics.html#t:DMsg">DMsg</a> -&gt; Bool</li><li class="src short"><a href="#v:dmCmpLvlPos">dmCmpLvlPos</a> :: <a href="Diagnostics.html#t:DMsg">DMsg</a> -&gt; <a href="Diagnostics.html#t:DMsg">DMsg</a> -&gt; Ordering</li><li class="src short"><a href="#v:ppDMsg">ppDMsg</a> :: <a href="Diagnostics.html#t:DMsg">DMsg</a> -&gt; String</li><li class="src short"><span class="keyword">class</span> Monad d =&gt; <a href="#t:Diagnostic">Diagnostic</a> d  <span class="keyword">where</span><ul class="subs"><li><a href="#v:emitD">emitD</a> :: <a href="Diagnostics.html#t:DMsg">DMsg</a> -&gt; d ()</li><li><a href="#v:emitInfoD">emitInfoD</a> :: <a href="SrcPos.html#t:SrcPos">SrcPos</a> -&gt; String -&gt; d ()</li><li><a href="#v:emitWngD">emitWngD</a> :: <a href="SrcPos.html#t:SrcPos">SrcPos</a> -&gt; String -&gt; d ()</li><li><a href="#v:emitErrD">emitErrD</a> :: <a href="SrcPos.html#t:SrcPos">SrcPos</a> -&gt; String -&gt; d ()</li><li><a href="#v:getDMsgsD">getDMsgsD</a> :: d [<a href="Diagnostics.html#t:DMsg">DMsg</a>]</li><li><a href="#v:-124--124--124-">(|||)</a> ::  d a -&gt; d a -&gt; d a</li></ul></li><li class="src short"><span class="keyword">class</span> <a href="Diagnostics.html#t:Diagnostic">Diagnostic</a> df =&gt; <a href="#t:DiagnosticFail">DiagnosticFail</a> df  <span class="keyword">where</span><ul class="subs"><li><a href="#v:failD">failD</a> ::  <a href="SrcPos.html#t:SrcPos">SrcPos</a> -&gt; String -&gt; df a</li><li><a href="#v:failNoReasonD">failNoReasonD</a> ::  df a</li><li><a href="#v:failIfErrorsD">failIfErrorsD</a> :: df ()</li><li><a href="#v:stopD">stopD</a> ::  df a</li></ul></li><li class="src short"><span class="keyword">data</span>  <a href="#t:D">D</a> a</li><li class="src short"><a href="#v:runD">runD</a> ::  <a href="Diagnostics.html#t:D">D</a> a -&gt; (a, [<a href="Diagnostics.html#t:DMsg">DMsg</a>])</li><li class="src short"><span class="keyword">data</span>  <a href="#t:DF">DF</a> a</li><li class="src short"><a href="#v:dToDF">dToDF</a> ::  <a href="Diagnostics.html#t:D">D</a> a -&gt; <a href="Diagnostics.html#t:DF">DF</a> a</li><li class="src short"><a href="#v:runDF">runDF</a> ::  <a href="Diagnostics.html#t:DF">DF</a> a -&gt; (Maybe a, [<a href="Diagnostics.html#t:DMsg">DMsg</a>])</li><li class="src short"><a href="#v:internalError">internalError</a> ::  String -&gt; String -&gt; String -&gt; a</li><li class="src short"><a href="#v:assert">assert</a> ::  Bool -&gt; String -&gt; String -&gt; String -&gt; a -&gt; a</li><li class="src short"><a href="#v:assertM">assertM</a> :: Monad m =&gt; Bool -&gt; String -&gt; String -&gt; String -&gt; m ()</li></ul></div><div id="interface"><h1 id="g:1">Diagnostic messages
</h1><div class="top"><p class="src"><span class="keyword">data</span>  <a name="t:DMsg" class="def">DMsg</a>  </p><div class="doc"><p>Representation of diagnostic messages
</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:DMsg" class="def">DMsg</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><dl><dt class="src"><a name="v:dmLvl" class="def">dmLvl</a> :: <a href="Diagnostics.html#t:DMLvl">DMLvl</a></dt><dd class="doc"><p>Severity level
</p></dd><dt class="src"><a name="v:dmSrcPos" class="def">dmSrcPos</a> :: <a href="SrcPos.html#t:SrcPos">SrcPos</a></dt><dd class="doc"><p>Associated source position
</p></dd><dt class="src"><a name="v:dmTxt" class="def">dmTxt</a> :: String</dt><dd class="doc"><p>Message text
</p></dd></dl><div class="clear"></div></div></td></tr></table></div><div class="subs instances"><p id="control.i:DMsg" class="caption collapser" onclick="toggleSection('i:DMsg')">Instances</p><div id="section.i:DMsg" class="show"><table><tr><td class="src"><a href="SrcPos.html#t:HasSrcPos">HasSrcPos</a> <a href="Diagnostics.html#t:DMsg">DMsg</a></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><span class="keyword">data</span>  <a name="t:DMLvl" class="def">DMLvl</a>  </p><div class="doc"><p>Severity levels
</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a name="v:DMLInfo" class="def">DMLInfo</a></td><td class="doc"><p>Information (least severe)
</p></td></tr><tr><td class="src"><a name="v:DMLWng" class="def">DMLWng</a></td><td class="doc"><p>Warning
</p></td></tr><tr><td class="src"><a name="v:DMLErr" class="def">DMLErr</a></td><td class="doc"><p>Error (most severe)
</p></td></tr></table></div><div class="subs instances"><p id="control.i:DMLvl" class="caption collapser" onclick="toggleSection('i:DMLvl')">Instances</p><div id="section.i:DMLvl" class="show"><table><tr><td class="src">Eq <a href="Diagnostics.html#t:DMLvl">DMLvl</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">Ord <a href="Diagnostics.html#t:DMLvl">DMLvl</a></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><a name="v:mkInfoMsg" class="def">mkInfoMsg</a> :: <a href="SrcPos.html#t:SrcPos">SrcPos</a> -&gt; String -&gt; <a href="Diagnostics.html#t:DMsg">DMsg</a></p><div class="doc"><p>Constructs information message.
</p></div></div><div class="top"><p class="src"><a name="v:mkWngMsg" class="def">mkWngMsg</a> :: <a href="SrcPos.html#t:SrcPos">SrcPos</a> -&gt; String -&gt; <a href="Diagnostics.html#t:DMsg">DMsg</a></p><div class="doc"><p>Constructs warning message.
</p></div></div><div class="top"><p class="src"><a name="v:mkErrMsg" class="def">mkErrMsg</a> :: <a href="SrcPos.html#t:SrcPos">SrcPos</a> -&gt; String -&gt; <a href="Diagnostics.html#t:DMsg">DMsg</a></p><div class="doc"><p>Constructs error message.
</p></div></div><div class="top"><p class="src"><a name="v:dmIsInfo" class="def">dmIsInfo</a> :: <a href="Diagnostics.html#t:DMsg">DMsg</a> -&gt; Bool</p><div class="doc"><p>Checks if information message.
</p></div></div><div class="top"><p class="src"><a name="v:dmIsWng" class="def">dmIsWng</a> :: <a href="Diagnostics.html#t:DMsg">DMsg</a> -&gt; Bool</p><div class="doc"><p>Checks if warning message.
</p></div></div><div class="top"><p class="src"><a name="v:dmIsErr" class="def">dmIsErr</a> :: <a href="Diagnostics.html#t:DMsg">DMsg</a> -&gt; Bool</p><div class="doc"><p>Checks if error message.
</p></div></div><div class="top"><p class="src"><a name="v:dmCmpLvlPos" class="def">dmCmpLvlPos</a> :: <a href="Diagnostics.html#t:DMsg">DMsg</a> -&gt; <a href="Diagnostics.html#t:DMsg">DMsg</a> -&gt; Ordering</p><div class="doc"><p>Comparison function for ordering messages first by severity, then
 by source position.
</p></div></div><div class="top"><p class="src"><a name="v:ppDMsg" class="def">ppDMsg</a> :: <a href="Diagnostics.html#t:DMsg">DMsg</a> -&gt; String</p><div class="doc"><p>Formats a diagnostic message for printing.
</p></div></div><h1 id="g:2">Diagnostic computations
</h1><div class="top"><p class="src"><span class="keyword">class</span> Monad d =&gt; <a name="t:Diagnostic" class="def">Diagnostic</a> d  <span class="keyword">where</span></p><div class="doc"><p>Class for diagnostic computations. Diagnostic computations accumulate
 diagnostic messages.
</p></div><div class="subs methods"><p class="caption">Methods</p><p class="src"><a name="v:emitD" class="def">emitD</a> :: <a href="Diagnostics.html#t:DMsg">DMsg</a> -&gt; d ()</p><div class="doc"><p>Emits a diagnostic message
</p></div><p class="src"><a name="v:emitInfoD" class="def">emitInfoD</a> :: <a href="SrcPos.html#t:SrcPos">SrcPos</a> -&gt; String -&gt; d ()</p><div class="doc"><p>Emits an information message.
</p></div><p class="src"><a name="v:emitWngD" class="def">emitWngD</a> :: <a href="SrcPos.html#t:SrcPos">SrcPos</a> -&gt; String -&gt; d ()</p><div class="doc"><p>Emits a warning message.
</p></div><p class="src"><a name="v:emitErrD" class="def">emitErrD</a> :: <a href="SrcPos.html#t:SrcPos">SrcPos</a> -&gt; String -&gt; d ()</p><div class="doc"><p>Emits an error message.
</p></div><p class="src"><a name="v:getDMsgsD" class="def">getDMsgsD</a> :: d [<a href="Diagnostics.html#t:DMsg">DMsg</a>]</p><div class="doc"><p>Diagnostic messages emitted thus far
</p></div><p class="src"><a name="v:-124--124--124-" class="def">(|||)</a> ::  d a -&gt; d a -&gt; d a</p><div class="doc"><p>Tries the first diagnostic computation. If that results in errors,
 discards those and runs the second computation.
</p></div></div><div class="subs instances"><p id="control.i:Diagnostic" class="caption collapser" onclick="toggleSection('i:Diagnostic')">Instances</p><div id="section.i:Diagnostic" class="show"><table><tr><td class="src"><a href="Diagnostics.html#t:Diagnostic">Diagnostic</a> <a href="Diagnostics.html#t:DF">DF</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="Diagnostics.html#t:Diagnostic">Diagnostic</a> <a href="Diagnostics.html#t:D">D</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="Diagnostics.html#t:Diagnostic">Diagnostic</a> d =&gt; <a href="Diagnostics.html#t:Diagnostic">Diagnostic</a> (DFT d)</td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><span class="keyword">class</span> <a href="Diagnostics.html#t:Diagnostic">Diagnostic</a> df =&gt; <a name="t:DiagnosticFail" class="def">DiagnosticFail</a> df  <span class="keyword">where</span></p><div class="doc"><p>Class for diagnostic computations with failure.
</p></div><div class="subs methods"><p class="caption">Methods</p><p class="src"><a name="v:failD" class="def">failD</a> ::  <a href="SrcPos.html#t:SrcPos">SrcPos</a> -&gt; String -&gt; df a</p><div class="doc"><p>Emits an error message and fails.
</p></div><p class="src"><a name="v:failNoReasonD" class="def">failNoReasonD</a> ::  df a</p><div class="doc"><p>Fails without giving any specific reason.
</p></div><p class="src"><a name="v:failIfErrorsD" class="def">failIfErrorsD</a> :: df ()</p><div class="doc"><p>Fails if there has been errors thus far
</p></div><p class="src"><a name="v:stopD" class="def">stopD</a> ::  df a</p><div class="doc"><p>Forces a stop, e.g. after some user-specified pass.
</p></div></div><div class="subs instances"><p id="control.i:DiagnosticFail" class="caption collapser" onclick="toggleSection('i:DiagnosticFail')">Instances</p><div id="section.i:DiagnosticFail" class="show"><table><tr><td class="src"><a href="Diagnostics.html#t:DiagnosticFail">DiagnosticFail</a> <a href="Diagnostics.html#t:DF">DF</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="Diagnostics.html#t:Diagnostic">Diagnostic</a> d =&gt; <a href="Diagnostics.html#t:DiagnosticFail">DiagnosticFail</a> (DFT d)</td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><span class="keyword">data</span>  <a name="t:D" class="def">D</a> a </p><div class="doc"><p>Diagnostic computation.
</p></div><div class="subs instances"><p id="control.i:D" class="caption collapser" onclick="toggleSection('i:D')">Instances</p><div id="section.i:D" class="show"><table><tr><td class="src">Monad <a href="Diagnostics.html#t:D">D</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src">MonadFix <a href="Diagnostics.html#t:D">D</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="Diagnostics.html#t:Diagnostic">Diagnostic</a> <a href="Diagnostics.html#t:D">D</a></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><a name="v:runD" class="def">runD</a> ::  <a href="Diagnostics.html#t:D">D</a> a -&gt; (a, [<a href="Diagnostics.html#t:DMsg">DMsg</a>])</p><div class="doc"><p>Runs a diagnostic computation. Returns:
</p><ol><li> Result of the computation.
</li><li> Sorted list of diagnostic messages.
</li></ol></div></div><div class="top"><p class="src"><span class="keyword">data</span>  <a name="t:DF" class="def">DF</a> a </p><div class="subs instances"><p id="control.i:DF" class="caption collapser" onclick="toggleSection('i:DF')">Instances</p><div id="section.i:DF" class="show"><table><tr><td class="src">Monad <a href="Diagnostics.html#t:DF">DF</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="Diagnostics.html#t:DiagnosticFail">DiagnosticFail</a> <a href="Diagnostics.html#t:DF">DF</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a href="Diagnostics.html#t:Diagnostic">Diagnostic</a> <a href="Diagnostics.html#t:DF">DF</a></td><td class="doc empty">&nbsp;</td></tr></table></div></div></div><div class="top"><p class="src"><a name="v:dToDF" class="def">dToDF</a> ::  <a href="Diagnostics.html#t:D">D</a> a -&gt; <a href="Diagnostics.html#t:DF">DF</a> a</p></div><div class="top"><p class="src"><a name="v:runDF" class="def">runDF</a> ::  <a href="Diagnostics.html#t:DF">DF</a> a -&gt; (Maybe a, [<a href="Diagnostics.html#t:DMsg">DMsg</a>])</p></div><h1 id="g:3">Reporting and checking for internal errors
</h1><div class="top"><p class="src"><a name="v:internalError" class="def">internalError</a> ::  String -&gt; String -&gt; String -&gt; a</p><div class="doc"><p>Signals an internal compiler error.
 Call with module name, name of function, and error message
 to report internal errors; i.e., things that should not happen.
</p></div></div><div class="top"><p class="src"><a name="v:assert" class="def">assert</a> ::  Bool -&gt; String -&gt; String -&gt; String -&gt; a -&gt; a</p><div class="doc"><p>Checks that a condition holds and returns given value if so.
 Signals an internal compiler error otherwise.
 Call with condition, module name, name of function, error message, and
 value to return if condition satisfied.
</p></div></div><div class="top"><p class="src"><a name="v:assertM" class="def">assertM</a> :: Monad m =&gt; Bool -&gt; String -&gt; String -&gt; String -&gt; m ()</p><div class="doc"><p>Checks that a condition holds. Signals an internal compiler error
 otherwise. Call with condition, module name, name of function, error
 message.
</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.11.0</p></div></body></html>